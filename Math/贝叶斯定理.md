# 贝叶斯定理

$$
P(H\mid E) = \frac{P(H)P(E\mid H)}{P(E)}
$$

其中，H是假设（Hypothesis），E是证据（Evidence）。

+ $P(H\mid E)$（后验概率）：已有证据的情况下，假设成立的概率；
+ $P(E\mid H)$（似然性）：假设成立的情况下，证据出现的概率；
+ $P(H)$（先验概率）：不考虑任何证据方面的因素，只基于已有的、历史的认知，假设成立的概率；
+ $P(E)$（边际概率）：证据出现的概率，往往要对各自假设下证据出现的概率进行求和（全概率）。

## 蒙提霍尔问题

参赛者会看见三扇门，其中一扇门的里面有一辆汽车，选中里面是汽车的那扇门，就可以赢得该辆汽车，另外两扇门里面则都是一只山羊。当参赛者选定了一扇门，主持人会开启一扇是山羊的门；并问：“要不要换一扇门？”

这个问题难点之一在于很多地方没有把问题表述，或者说强调清楚？参赛者选择换一扇门中奖概率提高到2/3的前提是：主持人对门后的奖品知情，且总是站在节目组的角度考虑，以参赛者不中奖为目标而行动。有了这个前提，主持人第一次必定打开背后是山羊的门的行为才有价值，这改变了我们的知识。

来看下这个2/3是怎么计算的。我们将参赛者选中的门、主持人首次选择的门和最后一扇门标记为A、B、C。$P(A)$表示奖品在A后的概率，<Notation>$P(B)$表示主持人打开门B的概率</Notation>，$P(C)$表示奖品在C后的概率。感觉理解$P(B)$的含义又是一大难点，如果我们惯性思维让$P(B)$表示奖品在B后面，就丢失了主持人筛选行为所提供的信息：

$$
\begin{split}
P(中奖) &= P(C\mid B) \\
&= \frac{P(C)P(B\mid C)}{P(B)} \\
&= \frac{P(C)P(B\mid C)}{P(B\mid A)P(A)+\cancel{P(B\mid B)P(B)}+P(B\mid C)P(C)} \\
&= \frac{\frac{1}{3}}{\frac{1}{3}\frac{1}{2} + 0 + \frac{1}{3}} \\
&= \frac{2}{3}
\end{split}
$$

解释：

- $P(C \mid B)$：表示在主持人打开门 B  后，奖品在门 C 后的概率。
- $P(C)$：表示奖品在门 C 后的先验概率，等于 $\frac{1}{3}$。
- $P(B \mid C)$：表示在奖品在门 C 后的情况下，主持人打开门 B 的概率。因为主持人知道哪个门后是奖品，他会选择打开一个没有奖品的门，所以这个概率是 1。
- $P(B)$：主持人打开门 B 的概率可以通过所有可能情况下的概率求和得到：

  - $P(B \mid A) = \frac{1}{2}$，因为如果奖品在门 A 后，主持人可以打开门 B 或门 C 。
  - $P(B \mid B) = 0$，因为如果奖品在门 B 后，主持人不会打开这个门。这个式子其实不该出现，因为B不能既表示主持人打开B的概率，又表示奖品在B后面的概率；
  - $P(B \mid C) = 1$，因为如果奖品在门 C 后，主持人会选择打开门 B 。
