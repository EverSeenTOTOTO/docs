# 贝叶斯定理
贝叶斯定理（Bayes’ theorem）给出了在获得新证据后，如何从先验概率更新到后验概率的数学公式。设有一个假设 $H$ 和一条观测到的证据 $E$，则
$$
P(H\mid E) \;=\;\frac{P(H)\,P(E\mid H)}{P(E)}\,.
$$
其中
- $P(H)$ 称为先验概率（prior probability），表示在没有看到证据 $E$ 之前对假设 $H$ 的相信程度；
- $P(E\mid H)$ 称为似然（likelihood），表示假设 $H$ 成立时观测到证据 $E$ 的概率；
- $P(H\mid E)$ 称为后验概率（posterior probability），表示看到证据 $E$ 之后修正后的对假设 $H$ 成立的相信程度；
- $P(E)$ 称为边际概率（marginal probability），可以用全概率公式计算：
  $$
  P(E)\;=\;\sum_{i}P(H_i)\,P(E\mid H_i)\,,
  $$
  这里 $\{H_i\}$ 为一组互斥且完备的假设。

---

蒙提霍尔问题（Monty Hall problem）是贝叶斯定理的经典应用之一。问题设定如下：
- 台上有三扇门，其中一扇门后藏有一辆汽车，另两扇门后各藏一只山羊；
- 参赛者首先任选一扇门（记为门 1）；
- 知情的主持人不会打开参赛者选中的门，也不会打开藏有汽车的门，而是随机打开另一扇藏羊的门（记为门 2）；
- 然后主持人询问参赛者，是否要换到剩下那扇未打开的门（门 3）。

直觉上似乎换与不换赢的概率都各半，但实际上“换门”赢汽车的概率是 $2/3$，而“不换”只能 $1/3$。

要用贝叶斯定理来证明这一点，我们定义三个互斥假设：
$$
H_1:\;\text{汽车在门 1后},\qquad
H_2:\;\text{汽车在门 2后},\qquad
H_3:\;\text{汽车在门 3后},
$$
以及事件
$$
M_2:\;\text{主持人打开了门 2}.
$$
参赛者最初选的是门 1，之后主持人打开门 2，给出的信息即为 $M_2$。我们要计算的后验概率是
$$
P(H_3\mid M_2)
=\frac{P(H_3)\,P(M_2\mid H_3)}{P(M_2)}.
$$
各项取值如下：
- 先验 $P(H_1)=P(H_2)=P(H_3)=\tfrac13$；
- 若汽车在门 1（即 $H_1$），主持人在门 2 或门 3 都可打开，故
  $$
  P(M_2\mid H_1)=\tfrac12;
  $$
- 若汽车在门 2（$H_2$），主持人不会打开门 2，故
  $$
  P(M_2\mid H_2)=0;
  $$
- 若汽车在门 3（$H_3$），主持人只能打开门 2，故
  $$
  P(M_2\mid H_3)=1.
  $$

根据全概率公式，
$$
P(M_2)
= P(H_1)P(M_2\mid H_1)
+ P(H_2)P(M_2\mid H_2)
+ P(H_3)P(M_2\mid H_3)
= \tfrac13\cdot\tfrac12 + \tfrac13\cdot0 + \tfrac13\cdot1
= \tfrac12.
$$
于是
$$
P(H_3\mid M_2)
= \frac{\tfrac13 \times 1}{\tfrac12}
= \tfrac23.
$$
这说明，主持人打开一扇山羊门后，换到剩下那扇门（门 3）赢汽车的概率是 $2/3$，而坚持原选门 1 赢汽车的概率是
$$
P(H_1\mid M_2)
=\frac{P(H_1)\,P(M_2\mid H_1)}{P(M_2)}
=\frac{\tfrac13\times\tfrac12}{\tfrac12}
=\tfrac13.
$$

直观地看：
- 你第一次选到汽车的概率只有 $1/3$，若此时不换，你就以 $1/3$ 的概率赢；
- 有 $2/3$ 的概率汽车不在你最初选的门后，这时主持人必定给你排除掉一扇山羊门，剩下那扇门后就一定是汽车，换门可赢得 $2/3$ 的概率。

由此可见，蒙提霍尔问题中的“换门”策略实际上是一个典型的贝叶斯更新过程，合理利用了主持人“知道奖品位置且必定打开山羊门”这一先验信息，从而将赢得汽车的概率从直觉的 $1/2$ 提升到 $2/3$。
