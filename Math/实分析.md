# 《陶哲轩实分析》[^link]阅读笔记

[^link]: 《陶哲轩实分析》\[澳]陶哲轩；李馨译；人民邮电出版社。

对这本书的评价：从大学开始就一直在寻找这样一本书：它完完全全把我当成傻子，从$1+1=2$开始教我数学，现在终于找到了。作为计算机人，读这本书也有不同的感受：我们可以用几条（图灵完备的）简单指令构造出整个计算机世界，也可以从几条看起来相当朴素的公理出发构建出宏伟的数学大厦，这之间严谨而又优雅的逻辑之美无法言喻。

我的高数说实话学得挺烂，除了自己太混以外，回过头来看和计算机专业的数学课程设计也不无关联。至少在我们专业，对我个人来说，高数课程大多数时候只学到了浮于表面的定理公式，理解很浅。一旦考得深入点，需要对某一概念本质有着深刻理解，再需要一点大量思维训练带来的“手感”、“技巧”的时候就寄了。有的时候真就是把书翻十遍也找不到那种感觉，get不到大佬的点，证明的每个字都能看懂，套路性的题目也能做，但书一合上就是感觉什么都没学到。我相信有不少被某绿皮书开头的$\epsilon-\delta$极限劝退的同学……

## 自然数

（欧几里德算法）设$n$是一个自然数，$q$表示一个正自然数，那么存在自然数$m$和$r$使得$0\le r<q$并且$n=mq+r$。也就是说，我们可以用一个正自然数$q$去除一个自然数$n$，从而得到商$m$（另一个自然数）和余数$r$（比$q$小）。书上提示用归纳法证明，但总感觉我的证明有点问题：

1.  如果$n<q$，很容易找到$m=0, r=n$满足条件；
2.  如果$n=q$，可以找到$m=1, r=0$满足条件；
3.  如果$n>q$，假设对$n$已经证明了算法成立，即存在$m_0$和$r_0$使得$0\le r_0<q$且$n=m_0q+r_0$，那么对于$n++$，有$n++=m_0q+r_0+1$，可以再次分情况讨论：

    1.  如果$r_0+1<q$，则$n++=m_0q+(r_0+1)$，满足条件；
    2.  如果$r_0+1=q$，则$n++=(m_0+1)q$，满足条件。
    3.  因为$r_0<q$，所以$r_0+1\le q$，$r_0+1>q$不必讨论。

## 集合论

### 分类公理

设$A$是一个集合，对于任意的$x\in A$，令$P(x)$表示关于$x$的一个性质，那么集合$\{x\in A: P(x)为真\}$存在。

分类公理说明如果考察一个集合中元素的某些性质，必定可以找到使这些性质为真的元素的一个集合（并且这个集合是$A$的子集）。它最重要的地方在于那个不起眼的前提“$A$是一个集合”，如果去掉这个假设，即对于任意对象，如果考察某些性质，必定存在对应的集合，就成为了概括公理，会导致罗素悖论。

### 替代公理

设$A$是一个集合，对任意的$x\in A$和任意的一个对象$y$，假设存在一个关于$x$和$y$的命题$P(x, y)$使得对任意的$x\in A$，**最多**找出一个$y$使$P(x, y)$为真，那么集合$\{y: P(x, y)对某x\in A为真\}$存在。

这个公理是函数的雏形，它保证了函数映射不能存在一对多。我的直观上的感受是，这个公理让我们在构造新的集合时，新集合概念上总是“小于等于”原集合的，从而让事情处在一个可控的范围之内。

## 函数

### 函数定义

设$X$和$Y$是集合，令$P(x,y)$表示对象$x\in X$和$y\in Y$的一个性质，并且$P(x, y)$满足对于任意的$x\in X$，恰好存在一个$y\in Y$使得$P(x, y)$为真（**垂线测试**），那么我们定义在**定义域$X$和值域$Y$**上确定的**函数**$f: X\to Y$为下述事物：对于给定的任意输入$x\in X$，$f$指定了一个输出$f(x)\in Y$与其对应，并且$f(x)$是使得$P(x, f(x))$为真的唯一一个对象。因此对任意的$x\in X$和$y\in Y$，$y=f(x)\Leftrightarrow P(x, y)$为真。

函数定义再次强调了不能存在一对多。另外值得注意的是它要求定义域的每个元素在值域中都有映射，但允许值域中的元素没有来自定义域的映射，也就是定义域要被“用完”。

### 单射、满射和双射

函数的定义不允许一对多，但允许多对一的存在，如果我们收紧这个限制，就产生了**单射**的概念。不能存在多对一换句话说就是如果$x$与$x'$不同，那么$f(x)$和$f(x')$也不应该相同：$x\ne x'\Rightarrow f(x)\ne f(x')$。

函数定义没有要求值域都“用完”，如果我们收紧这个限制，就产生了**满射**的概念。即对于每一个$Y$中的元素$y$都要能找到来自定义域至少一个元素的映射：对$\forall y\in Y, \exist x\in X, 使f(x)=y$。

两个要求都满足，就是**双射**的概念。双射给了我们定义“两个集合大小相同”的方式：我们称两个集合$X$和$Y$有相等的基数，当且仅当存在从$X$到$Y$的一个双射$f: X\to Y$。从这个定义出发我们发现自然数集与偶数集具有相等的基数。基数算术也是另一种定义自然数算术的方法。

## 整数和有理数

皮亚诺公理->构造自然数->构造自然数减法->构造整数->构造整数除法->构造有理数。这里面的“脚手架”思想非常细腻。

（由有理数确定的整数散布）设$x$是一个有理数，那么存在一个整数$n$使得$n\le x<n+1$，并且这个整数是唯一的。另一方面，这个命题也说明不存在大于所有自然数的有理数。证明可以用到前面的欧几里德算法。根据有理数的定义，我们用整数除法定义有理数，因此$x$可以表示为两个整数$p$和$q$的除法，其中$q\ne 0$：$x=p/q$，为方便我们仅讨论$p$和$q$是自然数的情况，于是根据欧几里德算法，给定$p, q$可以找到$m, r$使得$p=mq+r$，此时$x=m+r/q$，由$0\le r<q$，$m\le x< m+1$，故这个$m$就是我们要找的$n$。如果$x<0$，可以将问题转化为$n+x'\le x+x'< n+1+x'$，这里$x'$是使$x+x'$大于$0$的一个正整数，显然这个整数是存在的。

### epsilon-接近

利用有理数算术，可以定义两个非常有用的运算：绝对值运算和指数运算。我们定义$x$和$y$之间的距离为$d(x, y)=|x - y|$。于是可以刻画两个数子有多“近”，有一个非标准的、脚手架性质的定义：

（ϵ-接近性）：设$\epsilon>0$是一个有理数，并且设$x, y$是有理数，我们称$y$是ϵ接近于$x$的，当且仅当它们之间的距离$d(y, x)=|y-x|<\epsilon$。终于看到极限的身影了。

### 有理数的稠密性

任意两个有理数之间至少存在一个有理数：如果$x$和$y$是两个有理数且$x< y$，那么存在第三个有理数使得$x<z<y$。由于有理数是用整数除法定义出来的，构造$z=\frac{x+y}{2}$就可以保证$z$是一个有理数，并且容易证明$z$满足$x<z<y$。但尽管有理数如此稠密，其中间还是有很多空隙，关于$\sqrt{2}$不是有理数的证明大家应该都很熟悉了。

## 实数

严格地定义实数将从有理数序列入手，即构造有理数->构造有理数序列->构造有理数序列极限->构造实数。

### epsilon-稳定

（ϵ-稳定性）设$\epsilon>0$，有理数序列$\{a_n\}_{n=0}^{\infty}$是ϵ-稳定的，当且仅当序列中的每一对$a_j$和$a_k$对任意的自然数$j$和$k$都是ϵ-接近的。换言之，序列$a_0, a_1, a_2, ...$是ϵ-稳定的，当且仅当$d(a_j, a_k)\le \epsilon$对任意的$j$和$k$均成立。

ϵ-稳定性有点太严格了，反而“错过”了序列的**极限**特征，因为它对序列头部的一些数字太敏感了。比如序列$10, 0, 0, 0, ...$，它是$10$-稳定的，但对任何小于$10$的ϵ都不是ϵ-稳定的，尽管它立刻就收敛于$0$。我们将要关注的是序列在远端的那些项，可以忽略掉开头的有限项，由此引出了最终稳定性的概念：

（最终ϵ-稳定性）设$\epsilon>0$，有理数序列$\{a_n\}_{n=0}^{\infty}$是最终ϵ-稳定的，当且仅当存在某个自然数$N\ge 0$，使得$a_N, a_{N+1}, a_{N+2}...$是ϵ-稳定的。换言之，序列$a_0, a_1, a_2, ...$是最终ϵ-稳定的，当且仅当存在一个$N\ge0$使得$d(a_j, a_k)\le \epsilon$对所有的$j, k\ge N$都成立。

直观的说，如果我们把序列相邻两项的差从左到右排成一排，即使开始差值很大，最终ϵ稳定性也保证了在某个$N$之后相邻项的差值是小于ϵ的，形成一种左宽右窄的“喇叭”形状。当然这个差也可能一开始就很小，这种情况下所要求的$N$就不需要很大。

显然，我们离极限的概念已经很接近了。到目前为止，ϵ是选定的，如果一个序列对任意$\epsilon>0$都有最终ϵ-稳定性，我们发现它很有用处。

:::warn
但无论如何，这都比上来甩你一个“对$\forall \epsilon>0，\exist N>0，使得对\forall n>N都有|a_n-L|< \epsilon$”好太多啦！
:::

### 柯西序列

满足对任意$\epsilon>0$都具有最终ϵ-稳定性的有理数序列成为**柯西序列**。应注意到目前为止讨论的所有ϵ也是正有理数，实数还没有构造出来，但一旦构造出实数，我们将看到将有理数替换为实数不会改变上述定义。

让我们将柯西序列与另一个基本概念——有界序列联系起来：

设$M\ge 0$是有理数，有限序列$a_1, a_2, ...a_n$以$M$**为界**，当且仅当$|a_i\le M$对任意的$1\le i\le n$均成立。无限序列$\{a_n\}_{n=1}^{\infty}$以$M$**为界**，当且仅当$|a_i|\le M$对任意的$i\ge 1$均成立。一个序列是**有界**的，当且仅当存在一个有理数$M\ge 0$使得该序列以$M$为界。

很容易证明**有限序列都是有界的**，进而证明**柯西序列都是有界的**：随便找一个自然数$1$，柯西序列都是最终$1$-稳定的，于是可以把它看成是一个有限序列和一个$1$-稳定的无限序列，假设有限序列的界为$M$，可以利用反证证明无限部分有一个界，若没有，那么对任意一个有理数$M$，都能找到序列中的一个数大于它，于是可以找到两个数$N$和$N+2$使序列中的两个数分别大于它，显然与整个序列是$1$-稳定的（注意不仅仅是最终$1$-稳定的）矛盾。设无限序列的界为$N$，于是找到原柯西序列的一个界$max(M,N)$。

在定义实数之前，我们还需要说明两个柯西序列什么时候会给出相同的柯西序列，因为我们将用柯西序列的极限定义实数，因此这将给予我们说明两个实数相等的方式。为此，我们再次引入ϵ-接近性，不过这一次是两个序列之间的接近：

（ϵ-接近性）设$\{a_n\}_{n=0}^{\infty}$和$\{b_n\}_{n=0}^{\infty}$是两个序列，并且设$\epsilon>0$。序列$\{a_n\}_{n=0}^{\infty}$接近于$\{b_n\}_{n=0}^{\infty}$的，当且仅当对于任意的$n\in N$均有$a_n$是ϵ-接近于$b_n$的。换言之，序列$a_0, a_1, a_2, ...$是ϵ-接近于$b_0, b_1, b_2, ...$的，当且仅当对于所有的$n=0, 1, 2, ...$，均有$|a_n-b_n|\le \epsilon$。

和之前一样，我们更青睐用处更大的最终ϵ-接近性：

（最终ϵ-接近性）设$\{a_n\}_{n=0}^{\infty}$和$\{b_n\}_{n=0}^{\infty}$是两个序列，并且设$\epsilon>0$。序列$\{a_n\}_{n=0}^{\infty}$最终接近于$\{b_n\}_{n=0}^{\infty}$的，当且仅当存在一个$N\ge 0$，使得序列$\{a_n\}_{n=N}^{\infty}$和序列$\{b_n\}_{n=N}^{\infty}$是ϵ-接近的。换言之，序列$a_0, a_1, a_2, ...$是最终ϵ-接近于$b_0, b_1, b_2, ...$的，当且仅当存在一个$N\ge 0$，使得对于所有的$n\ge N$，均有$|a_n-b_n|\le \epsilon$。

和引出柯西序列一样，如果不选定ϵ，可以给出**等价序列**的定义：若对任意$\epsilon>0$，均存在一个$N\ge 0$使得$|a_n-b_n|\le \epsilon$对所有的$n\ge N$均成立，就说$\{a_n\}_{n=0}^{\infty}$和$\{b_n\}_{n=0}^{\infty}$是**等价**的。应用这个定义$1.000...$和$0.999...$是等价的，前者$a_n=1+10^{-n}$，后者$b_n=1-10^{-n}$。因此$|a_n-b_n|=2×10^{-n}$，由于$10^{-n}$是递减函数，若$n\ge N$，$2×10^{-n}\le 2×10^{-N}$，只要找到一个$N$使$2×10^{-N}\le \epsilon$即可。由于还没有定义对数的概念，需要使用更原始的方法，我们发现$10^{-N}\le 1/N$，于是$2×10^{-N}\le 2/N$，于是对于任意的$\epsilon> 0$，均能找到一个$N\ge 2/\epsilon$使得当$n\ge N$时，$|a_n-b_n|\le \epsilon$。

### 实数性质

我们已经做好了构造实数的准备。为了定义实数，将引入一个记号LIM，它只是一个避免循环定义的脚手架，是一种**形式极限**，在我们定义出极限之后就会发现它与极限的定义相匹配，于是可以抛弃掉转而使用我们更熟悉的lim记号。

（实数）**实数**被定义为形如$LIM_{n\to \infty}a_n$的对象，其中$\{a_n\}_{n=1}^{\infty}$是有理数的一个柯西序列。称两个实数$LIM_{n\to \infty}a_n$和$LIM_{n\to \infty}b_n$是相等的，当且仅当$\{a_n\}_{n=0}^{\infty}$和$\{b_n\}_{n=0}^{\infty}$是等价序列。

在处理实数的时候，有时序列中的$0$会造成麻烦，例如在定义倒数运算的时候。为此我们要设法让柯西序列远离$0$，首先给出序列远离$0$的定义：

（远离$0$的序列）称有理数序列$\{a_n\}_{n=1}^{\infty}$是远离$0$的，当前仅当存在一个有理数$c>0$使得$|a_n|\ge c$对所有$n\ge 1$都成立。

现在可以证明**每一个不为$0$的实数都是某个远离$0$的柯西序列的形式极限**：设$x$是一个不为$0$的实数，那么存在某个远离$0$的柯西序列$\{a_n\}_{n=1}^{\infty}$使得$x=LIM_{n\to \infty}a_n$。因为$x$是实数，根据实数定义存在某个柯西序列$\{b_n\}_{n=1}^{\infty}$使得$x=LIM_{n\to \infty}b_n$，如何利用$\{b_n\}_{n=1}^{\infty}$构造出一个远离$0$的柯西序列$\{a_n\}_{n=1}^{\infty}$呢？由$x\ne 0=LIM_{n\to \infty}0$，$\{b_n\}_{n=1}^{\infty}$不等价于$\{0\}_{n=1}^{\infty}$，也即存在一个$\epsilon_0>0$，使得找不到一个$N\ge 0$令$|b_n-0|\le \epsilon_0$对所有$n\ge N$都成立，直观感受就是在序列远端（无论取多大的$N$），始终存在$|b_n|>\epsilon_0>0$的项，但这还不能保证远处某个位置开始的每个$|b_n|$都大于$0$。另一方面，既然$\{b_n\}_{n=1}^{\infty}$是柯西序列，说明它是最终ϵ-稳定的，于是对任意的$\epsilon>0$，存在一个$N\ge 0$使得当$j,k\ge N$时，$|b_j-b_k|\le \epsilon$成立。由于ϵ的任意性，我们当然可以选取$\epsilon=\epsilon_0$，并假设这时找到的$N=N_0$，使得当$j, k\ge N_0$时，$|b_j-b_k|\le \epsilon_0$成立。如果$b_j$或$b_k$任意一个为$0$，都会得到$|b_j|\le \epsilon_0$或$|b_k|\le \epsilon_0$，与前面得到的在远处必定存在$|b_n|>\epsilon_0$的项矛盾。于是$b_j$或$b_k$不能为$0$，换言之对于任意的$n\ge N_0$，都有$b_n> 0$，故$\{b_n\}_{n=1}^{\infty}$是“最终远离$0$的”。为了得到一个远离$0$的序列，只需要以$N_0$为分界线，将序列分割成两个部分，然后保留$n\ge N_0$的部分，将$1\le n<N_0$的部分替换为随便一个大于零的数，比如这里的$\epsilon_0$，从而得到一个$\epsilon_0, \epsilon_0, ..., b_{N_0}, b_{N_0+1}, ...$的序列，就是我们要找的$\{a_n\}_{n=1}^{\infty}$。

:::info
书上的证法，利用了绝对值不等式：由远处存在$|b_n|>\epsilon_0$的项，不妨就假设是$b_k$，于是$|b_k|>\epsilon_0$，$\epsilon_0<|b_k|=|b_k-b_j+b_j|\le |b_j|+|b_k-b_j|$，即$|b_j|>\epsilon_0-|b_j-b_k|$，又由最终稳定性得到$|b_j-b_k|\le \epsilon_0$，于是$|b_j|>0$。
:::

#### 阿基米德性质

设$x$和ϵ是任意的正实数，那么存在一个正整数$N$使得$N\epsilon>x$。这个性质说明，不管$x$多大，也不管ϵ多小，只要把ϵ自身不断地累加，最终都可以超过$x$。

在已经定义了实数乘法和倒数的情况下（本文未摘录）给出证明：数$x\epsilon^{-1}$也是一个正实数，因此它是某个柯西序列的形式极限，由柯西序列都是有界的，故存在有理数$M\ge 0$使得$x\epsilon^{-1}\le M$，左右两边同时乘上ϵ有$x\le M\epsilon$，因为不确定$M\epsilon$是不是有理数，可以同样利用有界性找到一个有理数$M'>M\epsilon$，然后根据对任意有理数$M'$都能找到一个正整数$N$使$N\le M'< N+1$的性质，得到$x< (N+1)\epsilon$。

（Q在R中稠密）任意给定两个实数$x<y$，都能找到一个有理数$q$使得$x<q<y$。

目前我们能和有理数牵上关系的方式主要有两种，整数除法或者柯西序列的界。这里用前者比较好，先考虑$q$是正数的情形，于是将有理数$q$表示为两个正整数的商$m/n$，问题转化为找到$m$和$n$使$nx<m<ny$，直观的说无论$x$和$y$之间多近，我们可以通过将它们翻$n$倍，扩大它们之间的间隙，使之能够容纳下一个整数$m$，于是只要找到一个$n$使得$ny-nx>1$，然后取$m=nx+1$即可。令$y-x=\epsilon$，阿基米德性质告诉我们使$n\epsilon>1$的$n$是存在的。如果$q$为负数或$0$，可以将问题转变为$x+q'<q+q'<y+q'$再做证明，这里$q'$是使$q+q'$大于$0$的一个正有理数。

:::error
将阿基米德性质做个变形，$N\epsilon >x$也可以写成$1/N<\epsilon/x$，由于$x$的任意性，可以令$x=1$，从而我们得到对任意的正实数$\epsilon>0$，都能找到一个正整数$N>0$，使得$0<1/N<\epsilon$，或者放松一点说对任意的正实数$\epsilon>0$，存在一个有理数$q$满足$0<q<\epsilon$。

受到这个例题的影响，我试图构造有理数$q_{\epsilon}$使$0<q_{\epsilon}<y-x$，然后转化为$x<x+q_{\epsilon}<y$，但这样得到的$x+q_{\epsilon}$不能保证是有理数，在这上面兜了很多圈子。也没搞懂书上说的反证要如何进行。
:::

利用和有理数类似的方式，可以证明对任意一个实数$x$，有且仅有一个整数$N$使得$N\le x< N+1$。

#### 最小上界性质

实数优于有理数的好处之一：对于实数集R的任意一个（有上界的）子集E，我们都能取到**最小上界**$\sup(E)$。为此首先给出上界的定义：

（上界）设$E$是$R$的一个子集，并设$M$是一个实数。称$M$是$E$的一个上界，当且仅当对于$E$中任意一个元素$x$都有$x\le M$。

（最小上界）设$E$是$R$的一个子集，且$M$是一个实数。称$M$是$E$的一个最小上界，当且仅当1. $M$是$E$的一个上界；2. $E$的其他任意上界一定大于或等于$M$。

（最小上界的唯一性）设$E$为$R$的一个子集，那么$E$最多只有一个最小上界。

利用反证证明，设最多不止一个最小上界，于是选取其中的两个$M_1$和$M_2$，则$M_1\ne M_2$，又因为最小上界的性质，有$M_1\ge M_2$，$M_2\ge M_1$，于是$M_1=M_2$，矛盾。

（最小上界的存在性）设$E$为$R$的一个子集，如果$E$有一个上界，那么它必定恰好存在一个最小上界。

这个证明不是那么直观，根据书上的提示最好划分为几个引理依次证明。命题只说$E$有一个上界，蕴含着存在的意思，如果把$E$的所有上界看成一个集合$S$，我们要在这个可能无限的集合里面找到最小的那个。但实数的“无限精确”特点使得找到了一个小的往往还有更小的，如何确保它们之间出现一种次序关系，使前一个在$S$中后一个就不在了呢？前面对阿基米德性质的讨论给了我们一些启示，还是可以通过放大它们之间的差异，直到中间能容纳的下一个整数，借助整数的次序特点证明一些内容，然后再还原。

（引理）设$E$是$R$的一个非空子集，$n\ge 1$是一个整数，并且设$L<K$是两个整数。假设$K/n$是$E$的一个上界，但是$L/n$不是$E$的上界，那么存在一个整数$m$满足$L< m\le K$且$m/n$是$E$的一个上界，但$(m-1)/n$不是$E$的一个上界。

显然这里$n$就是我们放大所乘上的倍数，再除以$n$就是还原的过程。令$K=ny$，$L=nx$，这里$x$和$y$是有理数。那么$L/n$不是$E$的上界等价于说存在$q_0\in E$，使得$q_0> x$；$K/n$是$E$的上界等价于说对任意$q\in E$，都有$q\le y$。我们关注的是$L$和$K$之间的间隙，由于$K-L\ge 1$，若等于号成立$K$就是要找的$m$。若不成立，中间存在一个或多个整数，我们取$L$和$K$之间最小的整数$L'$使$L'/n$不是$E$的上界，则有$L\le L'\le K-1$，取$m=L'+1$既可。

:::error
总感觉这里“取最小的整数$L'$不是很严谨。
:::

（引理）上述引理取到的$m$是唯一的。

根据上述证明过程，$m$不可能有两个，否则可以反证讨论这两个整数之间的次序关系。

现在我们完成存在性的证明：根据题设，$E$有一个上界，故存在一个实数$y$使得对任意$q\in E$，都有$q\le y$成立。若找一个不是$E$上界的实数$x$（由$E$非空知$x$存在），于是在$E$中存在一个$q_0$满足$q_0>x$。故$x<y$，根据阿基米德性质，可以找到有理数$m/n$使得$x< m/n < y$，即$nx<m<ny$（通过将负号“转移”到分子，可以保证分母是正的，因此$m/n$的正负不影响讨论）。这里需要注意$nx$和$ny$不直接就是上面的$L$和$K$，因为不能保证它们是整数。但前面已提及对任意实数$x$均能找到整数$N$满足$N\le x< N+1$，我们可以找到大于$y$的$y'$和小于$x$的$x'$使得$ny'$和$nx'$是整数（应该说，是先找到小于$nx$的整数和大于$ny$的整数，然后将它们除以$n$得到$x'$和$y'$），$q_0>x>x'$，$q\le y <y'$，于是$ny'$依然是$E$的上界，$nx'$依然不是$E$的上界，于是$L=nx'$，$K=ny'$，可以套用上面的定理，得到$E$的一个上界$(nx'+1)/n$。

接着证明它是最小的，目前我们有$nx'\le nx<ny\le ny'$，在$nx'\sim nx$和$ny\sim ny'$之间可能存在一些“缝隙”，我们的引理只对$nx'<nx'+1\le ny'$成立，不能保证$nx'+1$就落在$nx$和$ny$之间。好在这仅仅是一个$x', y'$选取的问题，我们在选取$x'$和$y'$时，如果选取恰好在$nx$前面和$ny$后面的那两个整数，是不影响我们使用引理的。而这时可以保证$nx'\sim nx$和$ny\sim ny'$之间没有整数，于是$nx<nx'+1\le ny$，由于$y$代表了任何一个存在的上界，所有上界$y$都是大于或等于$(nx'+1)/n$的，故是最小上界。

当然也可以讨论**最大下界$\inf(E)$**，并证明$M=\sup(E)=-\inf(-E)$，因此最小上界和最大下界是等价的。

#### 根的存在性

存在一个正实数$x$，使得$x^2=2$。

这个命题说明了有理数$Q$不满足最小上界性质，因此确实有些数是实数而非有理数。构造集合$E=\{y\in R: y\ge 0且y^2<2\}$，则$2$是$E$的一个上界且$E$非空。故存在$E$的一个最小上界$x=\sup(E)$，因为$x>1$（由$1\in E$）故$x>0$，可以通过反证证明$x^2=2$。

这个命题可以推广到$n$次根。

## 序列的极限

（序列的收敛）设$\epsilon>0$是一个实数，且$L$也是一个实数。实数序列$\{a_n\}_{n=N}^{\infty}$是ϵ-接近于$L$的，当且仅当对于任意的$n\ge N$，$a_n$都是ϵ-接近于$L$的，即$|a_n-L|\le \epsilon$对任意的$n\ge N$均成立。我们称序列$\{a_n\}_{n=m}^{\infty}$是最终ϵ-接近于$L$的，当且仅当存在一个$N\ge m$使得$\{a_n\}_{n=N}^{\infty}$是ϵ-接近于$L$的。我们称序列$\{a_n\}_{n=m}^{\infty}$收敛于$L$，当且仅当对于任意实数$\epsilon>0$，该序列都是最终ϵ-接近于$L$的。

（极限的唯一性）设$\{a_n\}_{n=m}^{\infty}$是从某个整数指标$m$开始的实数序列，并设$L\ne L'$是两个不同的实数，那么$\{a_n\}_{n=m}^{\infty}$不可能同时收敛于$L$和$L'$。

用反证法，设$L$和$L'$存在，那么存在一个$N\ge m$使得对任意的$\epsilon > 0$，该序列都是最终ϵ-接近于$L$的，存在一个$N'\ge m$使得对任意$\epsilon >0$，该序列都是最终ϵ-接近于$L'$的。于是在比$N$和$N'$还要远处取一个指标$n\ge max(N, N')$，则$a_n$是ϵ-接近于$L$和$L'$的，于是对任意$\epsilon>0$都有$|a_n-L|\le \epsilon$和$|a_n-L'|\le \epsilon$，显然可以利用绝对值不等式，再取一个合适的ϵ，得到一个与$|L-L'|$有关的矛盾。例如取$\epsilon=|L-L'|/3$，则有$|a_n-L'+L-a_n|=|L-L'|\le 2\epsilon= 2|L-L'|/3$，矛盾。

既然极限是唯一的，我们就可以用一个符号来指定它：

（序列的极限）如果序列$\{a_n\}_{n=m}^{\infty}$收敛于实数$L$，那么$\{a_n\}_{n=m}^{\infty}$是**收敛的**并且它的**极限**是$L$。我们用下式来表述它：

$$
L=\lim_{n\to \infty}a_n 
$$

如果序列$\{a_n\}_{n=m}^{\infty}$不收敛于任何实数$L$，那么序列$\{a_n\}_{n=m}^{\infty}$是发散的，并且$\lim_{n\to \infty}a_n$是无定义的。

证明$\lim_{n\to \infty}1/n=0$：

即证序列$\{a_n\}_{n=1}^{\infty}$收敛于$0$，换言之对于任意的$\epsilon>0$，需证明序列是最终ϵ-接近于$0$的。于是设$\epsilon>0$是一个任意的实数，只需找到一个$N$使得$|a_n-0|\le \epsilon$对任意的$n\ge N$均成立。$|a_n-0|=1/n\le 1/N$，只要让$1/N< \epsilon$，即$N>1/\epsilon$即可，前文对阿基米德性质的讨论保证了$N$的存在。

（收敛序列是柯西序列）假设$\{a_n\}_{n=m}^{\infty}$是一个收敛的实数序列，那么$\{a_n\}_{n=m}^{\infty}$也是一个柯西序列。

证明和前面的思路类似，根据$|a_j-L|\le \epsilon/2$，$|a_k-L|\le \epsilon/2$，利用绝对值不等式即可。

我们可以证明收敛序列都是有界的，但是有界序列不一定收敛，例如$1, -1, 1, -1, ...$。为此需要一个更强的结论：

（单调有界序列收敛）设$\{a_n\}_{n=m}^{\infty}$是一个实数序列，它存在一个有限的上界$M\in R$，并且它还是单调递增的（即对所有的$n\ge m$，均有$a_{n+1}\ge a_n$），那么$\{a_n\}_{n=m}^{\infty}$是收敛的，并且实际上$\lim_{n\to\infty}a_n=\sup(a_n)_{n=m}^{\infty}\le M$。

把$\{a_n\}_{n=m}^{\infty}$看成是$R$的一个子集，由它存在上界知$\sup(a_n)$存在并且$\sup(a_n)\le M$。下面证明序列收敛于$\sup(a_n)$，即证存在一个$N\ge m$使得对任意$\epsilon>0$，序列$\{a_n\}_{n=N}^{\infty}$都是ϵ-接近于$\sup(a_n)$的，即$|a_n-\sup(a_n)|\le \epsilon$对任意$n\ge N$恒成立。**由于$\sup(a_n)$是最小上界，于是在$\sup(a_n)-\epsilon$和$\sup(a_n)$之间必定存在一个$a_N$满足$\sup(a_n) - \epsilon<a_N\le \sup(a_n)$，否则最小上界就不是$\sup(a_n)$而是$\sup(a_n) - \epsilon$了**。由于$\{a_n\}_{n=N}^{\infty}$是单调递增的，这个$N$就是我们要找的。加粗部分的思想后面会多次用到。

### epsilon-附着

设$\{a_n\}_{n=m}^{\infty}$是一个实数序列，$x$是一个实数，并且设$\epsilon > 0$是一个实数。我们称：

1.  $x$是ϵ-**附着于**$\{a_n\}_{n=m}^{\infty}$的，当且仅当存在一个$N\ge m$使得$a_n$是ϵ-接近于$x$的；

2.  $x$是**持续ϵ-附着于**$\{a_n\}_{n=m}^{\infty}$的，当且仅当对于每一个$n\ge m$，$x$都是ϵ-附着于$\{a_n\}_{n=m}^{\infty}$的；

3.  $x$是$\{a_n\}_{n=m}^{\infty}$的**极限点**或**附着点**，当且仅当对任意的$\epsilon>0$，$x$都是持续附着于$\{a_n\}_{n=m}^{\infty}$的。

显然前面讨论的极限是极限点的一个特例，并且由极限的唯一性知它也是唯一的极限点。

### 上极限和下极限

设$\{a_n\}_{n=m}^{\infty}$是一个序列，我们定义一个新序列$\{a_N^+\}_{N=m}^{\infty}$，其中：

$$
a_N^+ = \sup(a_n)_{n=N}^{\infty}
$$

更通俗地说，$a_N^+$是序列从$a_N$开始继续往下数所有元素所构成集合的上确界，每往右数一个就从当前集合中排除一个数构成一个新的集合，然后重新计算当前集合的上确界。假设被删掉的数为$a_N$，这个新的上确界可能与之前那个相等，说明删掉的$a_N$不是$\{a_n\}_{n=N}^{\infty}$里面最大的，后面还有更大的$a_n$“支撑”起了$N$处的最小上界$a_{N}^+$，有$a_N\le a_N^+=a_{N++}^+$；也可能不等，有$a_{N++}^+\le a_N\le a_N^+$。因此不严密地说，$\{a_N^+\}_{N=m}^{\infty}$是一个单调递减序列（还有$\infty, \infty, ...$的情况）。

定义序列$\{a_n\}_{n=m}^{\infty}$的**上极限$L^+$**，记作：

$$
\lim \sup_{n\to\infty} a_n=\inf(a_N^+)_{N=m}^{\infty}
$$

类似地，可以定义$a_N^-=\inf(a_n)_{n=N}^{\infty}$和**下极限$L^-$**：

$$
\lim \inf_{n\to\infty} a_n=\sup(a_N^-)_{N=m}^{\infty}
$$

例如对于序列$1.1, -1.01, 1.001, -1.0001, ...$，那么$\{a_N^+\}_{N=m}^{\infty}$是$1.1, 1.001, 1.001, 1.00001, ...$，$\{a_N^-\}_{N=m}^{\infty}$是$-1.01, -1.01, -1.0001, -1.0001, ...$，前者的下确界是$1$，后者的上确界是$-1$，于是序列的上极限是$1$，下极限是$-1$。这里挺拗口的，对于上极限$L^+$，要取一个上确界序列的下确界，因为我们要找的是一个单调递减序列的下界。

直观上，上下极限是从上下两个方向逼近一个数，因此给出了一种判断序列是否收敛的办法：如果$L^+$和$L^-$重合且有限，那么序列是收敛的。

为了证明这个结论，可以先证明一个弱一点的推论：对于任意的$x> L^+$，存在一个$N\ge m$使得$a_n<x$对所有的$n\ge N$均成立（换言之，对于任意的$x>L^+$，序列$\{a_n\}_{n=m}^{\infty}$的元素最终会小于$x$）。类似的，对任意的$y<L^-$，存在一个$N\ge m$使得$a_n>y$对所有的$n\ge N$均成立。

由$x>L^+$知$x>\inf(a_N^+)_{N=m}^{\infty}$，于是一定存在一个$a_N^+$使得$\inf(a_N^+)_{N=m}^{\infty}\le a_N^+<x$，否则$\{a_N^+\}_{N=m}^{\infty}$的最大下界就应该是$x$了，而$a_N^+$又是$\{a_n\}_{n=N}^{\infty}$的上确界，于是对所有的$n\ge N$都有$x>a_N^+\ge a_n$，$L^-$同理。那么当$L=L^+=L^-$时，对任意的$\epsilon>0$，序列$\{a_n\}_{n=m}^{\infty}$的元素最终都会小于等于$L+\epsilon$，同时也会大于等于$L-\epsilon$，从而$L$就是序列的极限。

另外有一个有用的不等式：$\inf(a_n)_{n=m}^{\infty}\le L^-\le L^+\le \sup(a_n)_{n=m}^{\infty}$。根据$L^+$是单调递减序列下确界，$L^-$是单调递增序列上确界的直觉可以看出，证明思路沿用上面的推论即可。

### 比较原理

考虑两个实数序列$\{a_n\}_{n=m}^{\infty}$和$\{b_n\}_{n=m}^{\infty}$，满足对任意的$n\ge m$都有$a_n\le b_n$，则有：

$$
\sup(a_n)_{n=m}^{\infty}\le \sup(b_n)_{n=m}^{\infty} \\
\inf(a_n)_{n=m}^{\infty}\le \inf(b_n)_{n=m}^{\infty} \\
\lim \sup_{n\to\infty}a_n\le \lim \sup_{n\to\infty}b_n \\
\lim \inf_{n\to\infty}a_n\le \lim \inf_{n\to\infty}b_n \\
$$

用反证证明第一个式子，假设$\sup(a_n)_{n=m}^{\infty}> \sup(b_n)_{n=m}^{\infty}$，那么在$\sup(a_n)_{n=m}^{\infty}$和$\sup(b_n)_{n=m}^{\infty}$之间必定存在一个$a_n$，否则$\{a_n\}_{n=m}^{\infty}$的最小上界就不是$\sup(a_n)_{n=m}^{\infty}$而是$\sup(b_n)_{n=m}^{\infty}$了，于是找到了一个大于所有$b_n$的$a_n$，矛盾。

第三、四个式子的证明未能完成，被混乱的符号绕晕了。翻看了另一本《普林斯顿数学分析读本》，在那上面上下极限被定义为子序列极限所组成的集合的边界：

令$E$是满足下列条件的数$x\in R\cup \{-\infty, +\infty\}$的集合：存在某个子序列$\{s_{n_k}\}$使得$s_{n_k}\to x$。定义上极限为$\sup(E)$，下极限为$\inf(E)$。

从这个定义上下极限就不再具有“极限”的意味了，但对这里的证明有帮助：设$E$是$\{a_n\}$的子序列极限的集合，$F$是$\{b_n\}$的子序列极限的集合。固定一个自然数$N$，任取一个（下标）序列$\{n_k\}$，那么对于无穷多个$k$有$a_{n_k}\le b_{n_k}$，因此，如果$a_{n_k}\to a$且$b_{n_k}\to b$，那么$a\le b$。而这对每一个可能的序列$\{n_k\}$都成立，所以$E$的每个元素都小于或等于$F$的相应元素，因此$\sup(E)\le \sup(F), \inf(E)\le \inf(F)$。

（夹逼定理）设$\{a_n\}_{n=m}^{\infty}$、$\{b_n\}_{n=m}^{\infty}$和$\{c_n\}_{n=m}^{\infty}$是实数序列，并且它们满足对所有的$n\ge m$均有：

$$
a_n\le b_n\le c_n
$$

如果$\{a_n\}_{n=m}^{\infty}$和$\{c_n\}_{n=m}^{\infty}$收敛于同一个极限$L$，那么$\{b_n\}_{n=m}^{\infty}$也收敛于$L$。证明直接利用极限的定义即可。

（实数的完备性）实数序列$\{a_n\}_{n=m}^{\infty}$是柯西序列，当且仅当它是收敛的。

前面已经证明了收敛序列是柯西序列，因此这里只需证明柯西序列是收敛的就行了。同时可以将前面对有理数柯西序列有界的性质加以推广，可证实数柯西序列也是有界的。因此$L^-$和$L^+$有限，接下来只要证明$L^-=L^+$。设$\epsilon>0$，则序列是最终ϵ-稳定的，故存在一个$N\ge 1$使得$\{a_n\}_{n=N}^{\infty}$是ϵ-稳定的。由$a_N-\epsilon\le a_N\le a_N+\epsilon$，有$a_N-\epsilon\le \inf(a_n)_{n=N}^{\infty}\le \sup(a_n)_{n=N}^{\infty}\le a_N+\epsilon$（否则，最小上界是$a_N+\epsilon$，最大下界是$a_N-\epsilon$），根据前面得到的关于$L^+$和$L^-$的不等式，有$a_N-\epsilon\le L^-\le L^+\le a_N+\epsilon$，即$0\le L^--L^+\le 2\epsilon$，由于ϵ的任意性，可以推出$L^-=L^+$。

由于每一个实数都能找到一个对应的柯西序列，而每一个柯西序列都是收敛的。这个定理实际上说明实数集不像有理数集那样有“洞”（对于有理数集合，书上保留$\sqrt{2}$前n位小数构成的序列给出了在Q中不收敛，但是柯西序列的例子），用后面的话来说实数集是一个**完备的**度量空间。**仅在完备度量空间中才有“柯西序列$\implies$收敛序列”，而在任何度量空间中，“收敛序列$\implies$柯西序列”**。

### R中的一些重要序列

这一节摘自《普林斯顿数学分析》。

1.  $\frac{1}{n^p}\to 0$（当$p>0$时）；
2.  $\sqrt[n]{p}\to 1$（当$p>0$时）；
3.  $\sqrt[n]{n}\to 1$；
4.  $\frac{n^\alpha}{(1+p)^n}\to 0$（当$p>0$且$\alpha\in R$时）；
5.  $x^n\to 0$（当$|x|< 1$时）。

如果有对数的概念，相应的证明会有所简化，但此时我们还没有定义对数，因此对于2、3、4，一个技巧是利用二项式定理得到$x_n$关于$n$或$p$的不等式，然后应用夹逼定理证明。

## 级数

### 有限级数

（归纳证明二项式公式对任意自然数$n$都成立）：

$$
(x+y)^n=\sum_{j=0}^n\frac{n!}{j!(n-j)!}x^jy^{n-j}
$$

证明的思路来源于对$(x+y)(x+y)^2$的观察，要点是角标替换（引理7.1.4b）。对$n$进行归纳，$n=0$显然成立，由归纳假设得到上式，下面证明$(x+y)^{n+1}=\sum_{j=0}^{n+1}\frac{(n+1)!}{j!(n-j+1)!}x^jy^{n-j+1}$：

$$
\begin{equation}
\begin{split}
(x+y)^{n+1}&=(x+y)(x+y)^n \\
&= (x+y)\sum_{j=0}^n\frac{n!}{j!(n-j)!}x^jy^{n-j} \\ 
&=\sum_{j=0}^n\frac{n!}{j!(n-j)!}x^{j+1}y^{n-j} + \sum_{j=0}^n\frac{n!}{j!(n-j)!}x^jy^{n-j+1} \\ 
&= x^{n+1}+\sum_{j=0}^{n-1}\frac{n!}{j!(n-j)!}x^{j+1}y^{n-j} + \sum_{j=1}^n\frac{n!}{j!(n-j)!}x^jy^{n-j+1} + y^{n+1} \\ 
&= x^{n+1}+\sum_{j=0}^{n-1}\frac{n!}{j!(n-j)!}x^{j+1}y^{n-j} + \sum_{i=0}^{n-1}\frac{n!}{(i+1)!(n-i-1)!}x^{i+1}y^{n-i} + y^{n+1} \\
&= x^{n+1}+\sum_{j=0}^{n-1}(\frac{n!}{j!(n-j)!} +\frac{n!}{(j+1)!(n-j-1)!}) x^{j+1}y^{n-j} + y^{n+1} \\
\end{split}
\end{equation}
$$

括号部分可以化简：

$$
\begin{equation}
\begin{split}
\frac{n!}{j!(n-j)!} +\frac{n!}{(j+1)!(n-j-1)!}&=\frac{n(n-1)...(n-j+1)}{j!}+\frac{n(n-1)...(n-j)}{(j+1)!} \\  
&=\frac{n(n-1)...(n-j+1)(j+1)+n(n-1)...(n-j)}{(j+1)!} \\ 
&=\frac{(n+1)n(n-1)...(n-j+1)}{(j+1)!} \\ 
&=\frac{(n+1)!}{(j+1)!(n-j)!}
\end{split}
\end{equation}
$$

带回(1)式，再做一次角标替换，并把$x^{n+1}$和$y^{n+1}$还原为$i=n+1$和$i=0$的项：

$$
\begin{equation}
\begin{split}
x^{n+1}+\sum_{j=0}^{n-1}\frac{(n+1)!}{(j+1)!(n-j)!} x^{j+1}y^{n-j} + y^{n+1}&=x^{n+1}+\sum_{i=1}^n\frac{(n+1)!}{i!(n-i+1)!} x^iy^{n-i+1} + y^{n+1} \\
&=\sum_{i=0}^{n+1}\frac{(n+1)!}{i!(n-i+1)!}x^iy^{n-i+1}
\end{split}
\end{equation}
$$

### 无限级数

（零判别法）设$\sum_{n=m}^{\infty}a_n$是一个收敛的实数级数，那么我们一定有$\lim_{n\to\infty}a_n=0$。换言之，如果$\lim_{n\to\infty}a_n$不为零或者是发散的，那么级数$\sum_{n=m}^{\infty}a_n$是发散的。

零判别法的证明来源于这样的感觉：一个级数的收敛应当等价于对任意的$\epsilon>0$，这个序列的“尾部”最终将小于ϵ，不然累加起来就会越积越多导致发散。为此我们先证明如下命题：

设$\sum_{n=m}^{\infty}a_n$是一个实数的形式级数，那么$\sum_{n=m}^{\infty}a_n$收敛，当且仅当对于任意的实数$\epsilon>0$，都存在一个整数$N\ge m$使得$|\sum_{n=p}^qa_n|\le \epsilon$对所有的$p, q\ge N$均成立。

先证正向：若$\sum_{n=m}^{\infty}a_n$收敛，令$S_N$表示级数的第$N$部分和$S_N=\sum_{n=m}^Na_n$，则根据级数收敛的定义，序列$(S_N)_{N=m}^{\infty}$在$N\to\infty$时收敛于一个极限$L$。故$(S_N)_{N=m}^{\infty}$是柯西序列，柯西序列具有最终ϵ-稳定性，于是存在一个$N>0$使得对$d(S_p, S_q)=|S_p-S_q|\le \epsilon$对任意的$\epsilon>0$都成立，而$|Sp-Sq|$就是$|\sum_{n=p}^qa_n|$，故得证。

反过来证明是一样的，先根据条件中$p, q$的任意性得到最终ϵ-稳定性，于是根据定义$S_N$是一个柯西序列，而前文已经证明柯西序列是收敛的。

:::info
一直觉得柯西序列比较奇怪，它没有直接考察单个元素趋近某个值来获得极限的“感觉”，反而考察的是元素之间的距离。在级数这里终于看到了柯西序列的妙处，只能说大佬的思路和普通人不同。
:::

有了上述命题，现在来证明零判别法，同样分两个方向，正向只需要取$p=n-1, q=n$，由$|S_p-S_q|=|a_n-0|\le\epsilon$可证；反向可直接由命题导出$S_N$是收敛的。

（绝对收敛）设$\sum_{n=m}^{\infty}a_n$是一个实数的形式级数，若级数$\sum_{n=m}^{\infty}|a_n|$是（条件）收敛的，我们称这个级数是**绝对收敛**的。

（绝对收敛判别法）设$\sum_{n=m}^{\infty}a_n$是一个实数的形式级数，如果这个级数是绝对收敛的，那么它也是条件收敛的。另外，在这种情况下我们有三角不等式：

$$
|\sum_{n=m}^{\infty}a_n|\le \sum_{n=m}^{\infty}|a_n|
$$

证明：即证$\sum_{n=m}^{\infty}|a_n|$是收敛的能导出$\sum_{n=m}^{\infty}a_n$是收敛的，利用这个绝对值不等式及上面的命题即可。

不过该判别法反过来并不成立，即级数的条件收敛并不能导出绝对收敛。在给出例子之前，先来看交错级数判别法：

（交错级数判别法）设$(a_n)_{n=m}^{\infty}$是一个非负且递减的实数序列，于是对任意$n\ge m$均有$a_n\ge 0$和$a_n\ge a_{n+1}$。那么级数$\sum_{n=m}^{\infty}(-1)^na_n$是收敛的，当且仅当$n\to\infty$时序列$(a_n)_{n=m}^{\infty}$收敛于$0$。

正向的证明使用零判别法即可，反向的证明需借助这样的直觉，直接比较相邻项得出一些递推关系不太好：但比较差距为2乃至2k的项会有帮助。~~书上的证明实话说只能勉强看懂~~。

利用交错级数判别法，我们可以发现$\sum_{n=1}^{\infty}(-1)^n/n$是条件收敛的，但不是绝对收敛的，因为**调和级数**$\sum_{n=1}^{\infty}1/n$发散。

### 非负数的和

设$\sum_{n=m}^{\infty}a_n$是一个非负数的级数，那么部分和$S_N$是递增的，因此如果要让$(S_N)_{N=m}^{\infty}$收敛，当且仅当它有上界$M$。由此得到一个推论如下：

（比较判别法）设$\sum_{n=m}^{\infty}a_n$和$\sum_{n=m}^{\infty}b_n$都是实数的形式级数，并且对任意的$n\ge m$均有$|a_n|\le b_n$。所以，如果$\sum_{n=m}^{\infty}b_n$收敛，则$\sum_{n=m}^{\infty}a_n$绝对收敛，而且实际有：

$$
|\sum_{n=m}^{\infty}a_n|\le\sum_{n=m}^{\infty}|a_n|\le\sum_{n=m}^{\infty}b_n
$$

这里一个实用的级数是**几何级数**$\sum_{n=0}^{\infty}x^n$，其中$x$是实数：

（几何级数）设$x$是实数，如果$|x|\ge 1$，那么级数$\sum_{n=0}^{\infty}x^n$是发散的。反之这个级数是绝对收敛的，并且$\sum_{n=0}^{\infty}x^n=1/(1-x)$。

根据书上的提示，对第一句话使用零判别法，由$|x|\ge 1$有$\lim_{n\to\infty}x^n\ne 0$知发散，对第二句话，利用归纳法导出等比求和公式，从而得到$\sum_{n=0}^{\infty}|x^n|$的一个上界$1/(1-|x|)$可证。

到目前为止我们还没有证明调和级数是发散的，为此可以借助另一个判别法：柯西凝聚判别法，其可以用于证明 **$p$级数** $\sum_{n=1}^{\infty}\frac{1}{n^p}$的收敛性。

（柯西凝聚判别法）设$(a_n)_{n=1}^{\infty}$是一个递减的非负实数序列（于是对所有的$n\ge 1$，均有$a_n\ge 0$和$a_{n+1}\le a_n$。那么级数$\sum_{n=1}^{\infty}a_n$是收敛的，当且仅当级数$\sum_{k=0}^{\infty}2^ka_{2^k}=a_1+2a_2+4a_4+...$是收敛的。

该判别法的特点是只用了序列中的一部分项就可以判定收敛性。证明的思路在于注意到两个序列都是单调非负的，若令$s_n$表示前者的部分和，$t_n$表示后者的部分和，只要证明$s_n有界\iff t_n有界$即可。~~说是只要，但我不会，只能看书勉强维持生存这样子~~。

（p级数）设$p>0$是一个有理数，那么当$p>1$时，级数$\sum_{n=1}^{\infty}1/n^p$是收敛的，反之是发散的。

证明：应用柯西凝聚判别法，即证$\sum_{k=0}^{\infty}2^k\frac{1}{(2^k)^p}$是收敛的，其中$2^k\frac{1}{(2^k)p}=(2^k)^{1-p}=(2^{1-p})^k$，这是一个几何级数，显然只有在$p> 1$的时候才有$2^{1-p}< 1$，此时几何级数收敛。

### 级数的重排列

**只有级数是绝对收敛的，才可以对它进行安全的重排列**。

## R上的连续函数

### 实直线的子集

（ϵ-附着点）设$X$是$R$的子集，$\epsilon>0$，并设$x\in R$。我们称$x$是 **ϵ-附着于$X$** 的，当且仅当存在一个$y\in X$是ϵ-接近于$x$的（即$|x-y|\le \epsilon$。

（附着点）设$X$是$R$的一个子集，并设$x\in R$。我们称$x$是$X$的一个**附着点**，当且仅当对于任意的$\epsilon>0$，$x$都是ϵ-附着于$X$的。

以开区间$(0, 1)$为例，区间内的任何实数以及$0$和$1$都是该区间的附着点。但$1.1$不是，因为它不是$0.05$-附着于$(0,1)$的，类似的我们可以发现$1.01, 1.001, ...$都不是该区间的附着点，因为总可以找出一个更小的ϵ使它们不是ϵ-附着于$(0,1)$的。用一个绝妙的比喻，如果将开区间看成是一个边界为虚线的集合，设法纳入$0$和$1$就是我们将边界描成实线所做的努力，由此引出了闭包的概念：

（闭包）设$X$是$R$的一个子集。$X$的**闭包**，有时记作$\overline{X}$，是指由$X$的全体附着点所构成的集合。

上述$(0,1)$的闭包是$[0,1]$，开区间或者半开区间的闭包把$($换成$[$即可。$Q$的闭包是$R$。

附着点与极限点之间存在密切的联系。集合$X$的附着点可以作为$X$中元素的极限而得到：

设$X$是$R$的子集，并且设$x\in R$。那么$x$是$X$的一个附着点，当且仅当存在一个完全由$X$中元素构成的序列$(a_n)_{n=0}^{\infty}$收敛于$x$。

证明的其中一个方向比较简单，由序列$(a_n)_{n=0}^{\infty}$收敛于$x$已经说明了对任意$\epsilon>0$，均有$a_n\in X$且$|a_n - x|\le \epsilon$，而这正是ϵ-附着的定义。反过来，已有附着点$x$，如何找到一个完全由$X$中元素构成的序列收敛于它呢？实际的证明需要借助集合论的可数选择公理（书中第八章），因为我看得似懂非懂就没有摘录。不过从引理8.4.5中能够得到一些提示，我们构造如下集合$X_n=\{e\in X: x-1/n\le e\le x\}$，利用阿基米德性质可以确认$X_n$对任意$n$是非空的，于是利用可数选择公理，能够找到一个序列$(a_n)_{n=1}^{\infty}$使得$a_n\in X_n$对所有的$n\ge 1$都成立，再利用夹逼定理，有$\lim_{n\to\infty}a_n=x$。

再学习微分之前，先将附着点替换成极限点的概念：

（极限点）设$X$是实直线的一个子集，我们称$x$是$X$的**极限点**（或**聚点**），当且仅当$x$是$X \backslash \{x\}$的一个附着点。如果$x\in X$，并且存在一个$\epsilon>0$使得$|x-y| > \epsilon$对所有的$y\in X\backslash\{x\}$均成立，那么我们称$x$是$X$的孤立点。

孤立点的概念看起来比较奇怪，其实是将附着点分成两类，去掉极限点这一类做出的表述。“孤立”意味着它与去掉它的集合还存在一定距离，这个直觉使我们要设法排除掉$(0,2)\cup\{3\}$里孤立的$3$，它是附着点，却不是极限点（从而是孤立点）。

（直线上的海涅-博雷尔定理）设$X$是$R$的一个子集，那么下面两个命题是等价的：

1.  $X$是闭的（$X=\overline{X}$）且有界（存在实数$M$满足$X\subset [-M, M]$）的；
2.  给定任意一个在$X$中取值（即对所有$n$均有$a_n\in X$）的实数序列$(a_n)_{n=0}^{\infty}$，存在它的一个子序列$(a_{n_j})_{j=0}^{\infty}$收敛于$X$中的某个数$L$。

### 函数的极限值

和利用ϵ-接近性和最终ϵ-接近性来处理序列的极限一样，我们需要用ϵ-接近性和局部ϵ-接近性的概念来处理函数的极限：

（ϵ-接近性）设$X$是$R$的一个子集，$f:X\to R$是一个函数，$L$是一个实数，并且设$\epsilon >0$也是一个实数。我们称函数$f$是**ϵ-接近** 于$L$的，当且仅当对于任意的$x\in X$，$f(x)$都是ϵ-接近于$L$的。

通常$X$的大小变化会带来所需ϵ的大小变化：

（局部ϵ-接近性）设$X$是$R$的一个子集，$f: X\to R$是一个函数，$L$是一个实数，$x_0$是$X$的一个附着点，并且设$\epsilon>0$是一个实数。我们称$f$在$x_0$**附近是ϵ-接近于$L$的**，当且仅当存在一个$\delta>0$使得当$f$被限制在集合$\{X\in X: |x-x_0|<\delta\}$上时，$f$是ϵ接近于$L$的。

可以想见，下一步是收紧ϵ的约束，得到更常用的概念：

（函数在一点处收敛）设$X$是$R$的一个子集，$f:X\to R$是一个函数，$E$是$X$的一个子集，$x_0$是$E$的一个附着点，并且设$L$是一个实数，我们称$f$在点$x_0$处**沿着$E$收敛于$L$**，并记作$\lim_{x\to x_0;x\in E}f(x)=L$，当且仅当对于任意的$\epsilon>0$，被限制在$E$上的函数$f$在$x_0$附近都是$\epsilon$-接近于$L$的。如果$f$在$x_0$处不收敛于任何数，那么我们称$f$在$x_0$处**发散**。

用更熟悉的表达：$\lim_{x\to x_0;x\in E}=L$当且仅当对于任意的$\epsilon>0$，存在一个$\delta>0$使得$|f(x)-L|\le \epsilon$对所有满足$|x-x_0|<\delta$的$x\in E$均成立。这个记号与我们熟悉的定义相比多了一个$E$，很多情况下我们会直接记作$\lim_{x\to x_0}f(x)=L$，有时这样会有风险，例如定义$f: R\to R$是如下的函数：当$x=0$时，$f(x)=1$；否则$f(x)=0$，那么$\lim_{x\to 0; x\in R-\{0\}}f(x)=0$而$\lim_{x\to 0; x\in R}f(x)$是无定义的。也因此有些定义中限制$x_0$为$E$的极限点而不是附着点。我们约定将$\lim_{x\to x_0}f(x)$看成是$\lim_{x\to x_0; x\in X-\{x_0\}}f(x)$的简写。

上面的定义还有更实用的表述：

（函数收敛的等价表述）设$X$是$R$的一个子集，$f: X\to R$是一个函数，$E$是$X$的一个子集，$x_0$是$E$的一个附着点，并且设$L$是一个实数。那么下面两个命题在逻辑上是等价的：

1.  $f$在$x_0$处沿着$E$收敛于$L$；
2.  对于任意一个完全由$E$中的元素构成并且收敛于$x_0$的序列$(a_n)_{n=0}^{\infty}$，序列$(f(a_n))_{n=0}^{\infty}$都收敛于$L$。

现在我们可以利用命题(2)去判断一些函数是否有极限，例如如下函数：

$$
f(x)=\begin{cases}
1 &若x\in Q \\ 
0 &若x\notin Q
\end{cases}
$$

现讨论$f(x)$在$x=0$处有没有极限，假设有，则选取两个由不为$0$的数组成的收敛到$0$的序列$(1/n)_{n=0}^{\infty}$和$(\sqrt{2}/n)_{n=0}^{\infty}$，它们应该都收敛到$f(0)=1$，但显然后者是无理数序列，有$L=\lim_{n\to\infty}f(\sqrt{2}/n)=\lim_{n\to\infty}0=0$，故矛盾。利用类似方法可以判断该函数在任意实数处都没有极限。

### 连续函数

“$f(x)$在$x_0$处是连续的”的几种等价表述：

1.  对于任意一个由$X$中元素构成的且满足$\lim_{n\to\infty}a_n=x_0$的序列$(a_n)_{n=0}^{\infty}$，都有$\lim_{n\to\infty}f(a_n)=f(x_0)$；

2.  对于任意的$\epsilon>0$，都存在一个$\delta>0$使得$|f(x)-f(x_0)|<\epsilon$对所有满足$|x-x_0|<\delta$的$x\in X$均成立；

3.  对于任意的$\epsilon>0$，都存在一个$\delta>0$使得$|f(x)-f(x_0)|\le\epsilon$对所有满足$|x-x_0|\le\delta$的$x\in X$均成立；

4.  设$x_0$同时是$X\cap(x_0, +\infty)$和$X\cup(-\infty, x_0)$的附着点，$f(x_0^+)$和$f(x_0^-)$都存在且等于$f(x_0)$。

### 最值原理

（最值原理）设$a<b$都是实数，并且设$f:[a, b]\to R$是$[a, b]$上的连续函数。那么$f$在某一点$x_{max}\in[a, b]$处达到最大值，并且在某一点$x_{min}\in[a,b]$处达到最小值。

证明只给出$f$在某点处取到最大值，最小值是类似的。思路上还是离不开上确界理论：

由引理9.6.3知$f$是有界的，所以存在一个$M$使得$f(x)\in[-M, M]$对任意的$x\in[a,b]$均成立。现在令$E$表示集合$f([a, b])$，则$E$是$[-M, M]$的子集，且$E$是非空集合，于是它有一个实数上确界$\sup(E)$，记作$m$。

对于所有的$y\in E$均有$y\le m$，也即$f([a, b])\le m$，因此，下一步只要找到一个$x_{max}$使得$f(x_{max})=m$即可。沿用此前$x-\frac{1}{n}$的技巧以及在上确界理论证明中提到的技巧：设$n\ge 1$是任意一个整数，那么$m-\frac{1}{n}<m=\sup(E)$。因为$\sup(E)$是$E$的最小上界，所以$m-\frac{1}{n}$不可能是$E$的上界，所以存在一个$y_0\in E$满足$m-\frac{1}{n}<y_0<m$，由$E$的定义可知存在一个$x_0$使得$f(x_0)=y_0$。下面应用选择公理构造序列：对于每个$n$，选取$x_n$为$[a,b]$中使得$m-\frac{1}{n}<f(x_n)<m$的元素，这得到了$[a,b]$上的一个序列，于是根据海涅-博雷尔定理，可以找到它的一个子序列$(x_{n_j})_{j=1}^{\infty}$收敛于某数$x_{max}$。由于$f$是连续的（故在$x_{max}$处连续），有序列$f(x_{n_j})_{j=1}^{\infty}$收敛于$f(x_{max})$：

$$
f(x_{max})=\lim_{j\to{\infty}}f(x_{n_j})\ge\lim_{j\to\infty}m-\frac{1}{j}=m
$$

从而完成了两个方向对等于号的证明，上面的大于等于还用到了$f(x_{n_j})>m-\frac{1}{n_j}\ge m-\frac{1}{j}$，从$\frac{1}{n_j}$到$\frac{1}{j}$的转变我感觉蛮怪的，但直觉上选出的序号$n_j$确实大于等于依次的$j$。

最值原理说明闭区间上的连续函数可达到它的最大最小值，应用类似的思路可证明函数还可以达到最值中间的任意一个值，即中值定理。

### 一致连续性

> 非常精彩的一章。

在闭区间上的连续函数是有界的，但是换成开区间就未必了。如果我们观察$f(x)=\frac{1}{x}$和$f(x)=x$，会发现连续和连续也是有区别的。

根据连续性的“$\epsilon-\delta$”定义，我们知道，如果$f:X\to R$在点$x_0$处是连续的，那么对于任意的$\epsilon>0$总存在一个$\delta$使得只要$x\in X$是$\delta$-接近于$x_0$的，$f(x)$就是$\epsilon$-接近于$f(x_0)$的。换言之，如果我们能够保证$x$是充分接近于$x_0$的，那么我们就可以迫使$f(x)$ $\epsilon$-接近于$f(x_0)$。**在每一个点$x_0$附近都存在一个“稳定岛”$(x_0-\delta, x_0+\delta)$使得$f(x)$偏离$f(x_0)$的范围不超过$\epsilon$**，这是思考这一点的方法之一。

函数$f(x)=\frac{1}{x}$和$f(x)=x$的区别之一就在于，对于同一个$\epsilon$，前者在$0.1$附近比在$1$附近的“稳定岛”更小（更不稳定），而后者$\delta$的取值不会发生变动，因此我们将后者称为**一致连续的**。更准确的说法如下：

（一致连续性）设$X$是$R$的一个子集，并且设$f:X\to R$是一个函数。我们称$f$是**一致连续的**，如果对于任意的$\epsilon>0$，都存在一个$\delta>0$使得只要$x,x_0\in X$是$X$中$\delta$-接近的两个点，$f(x)$和$f(x_0)$就是$\epsilon$-接近的。

与连续的概念进行对比，两者的区别在于：**在一致连续中我们可以取到单独一个$\delta$使得这个$\delta$-对所有的$x_0\in X$都适用；而对于一般的连续，不同的$x_0\in X$可能适用了不同的$\delta$。因此，每个一致连续的函数都是连续的，反之则不然。**

前面附着点与连续函数的概念都至少有“$\epsilon-\delta$”和“序列的”两种表述，一致连续性也是一样，与一致连续性对应的概念是**等价序列**，即对于任意$\epsilon>0$都具有最终$\epsilon$-接近性的两个序列，并且这时已经不要求是有界的或收敛的：

（等价序列）设$(a_n)_{n=1}^{\infty}$和$(b_n)_{n=1}^{\infty}$都是实数序列，那么两者等价当且仅当$\lim_{n\to\infty}(a_n-b_n)=0$。

（一致连续性的等价表述）设$X$是$R$的一个子集，并且设$f:X\to R$是一个函数，那么下面两个命题在逻辑上是等价的：

1.  $f$在$X$上是一致连续的；
2.  如果$(x_n)_{n=0}^{\infty}$和$(y_n)_{n=0}^{\infty}$是由$X$中元素构成的两个等价序列，那么序列$f(x_n)_{n=0}^{\infty}$和$f(y_n)_{n=0}^{\infty}$也是等价的。

我们再回过头来看$f(x)=\frac{1}{x}$，定义域$(0, 2)$，取两个序列$(1/n)_{n=1}^{\infty}$和$(1/2n)_{n=1}^{\infty}$，它们都是$(0, 2)$中的等价序列，但被$f$映射之后得到的序列就不是等价的了。因此可以说**如果$f$是一致连续的，那么$f$就把等价的序列映射成等价的序列**。还可以与前文函数收敛的序列表述进行对比，该表述换言之就是**如果函数是连续的，那么它就把收敛序列映射成收敛序列。**

一致连续函数还具有将柯西序列映射成柯西序列、将有界集映射成有界集的性质。并非所有的连续函数都是一致连续函数，但闭区间上的连续函数一定是一致连续的。

## 函数的微分

（牛顿法）设$X$是$R$的一个子集，$x_0\in X$是$X$的一个极限点，$f:X\to R$是一个函数，并且设$L$是实数。那么下列命题在逻辑上是等价的：

1.  $f$在$X$中的$x_0$处是可微的，且导数为$f'(x_0)$；
2.  对于任意的$\epsilon>0$都存在一个$\delta>0$使得，只要$x\in X$是$\delta$-接近于$x_0$的，$f(x)$就是$\epsilon|x-x_0|$-接近于$f(x_0)+f'(x_0)(x-x_0)$的，即如果$x\in X$且$|x-x_0|\le \delta$，那么就有：

$$
|f(x)-(f(x_0)+f'(x_0)(x-x_0))|\le\epsilon|x-x_0|
$$

将右侧换成近似为$0$，我们就得到更熟悉的阐述方式$f(x)\approx f(x_0)+f'(x_0)(x-x_0)$。

（可微性蕴涵着连续性）设$X$是$R$的一个子集，$x_0\in X$是$X$的一个极限点，$f:X\to R$是一个函数。如果$f$在$x_0$处是可微的，那么$f$在$x_0$处也是连续的。
